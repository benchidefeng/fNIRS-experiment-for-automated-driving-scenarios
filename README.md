## ***\*1\**** ***\*Data preprocessing\****

In order to remove respiration, heart rate, blood pressure fluctuations, Mayer waves noises and others noises. We did preprocessed for the raw intensity data of blood oxygen monitoring device by Homer3, and obtained the preprocessed data of ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps1.jpg)and ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps2.jpg). The preprocess contains removing motion artifact operation and filtering operation, and the functions and parameters which were employed are: hmrR_PruneChannels(dRang: 0.01-1, SNRthresh: 2, Sdrange:10.0,45.0), hmrR_Intensity2OD, hmrR_MotionArtifactByChannel(tMtion:0.5, tMask: 1.0, STDEVthresh: 5.0, AMPthresh: 0.05), hmrR_MotionCorrectWavelet(iqr: 1.50, turnon: 1), hmrR_BandpassFilt:Bandpass_Filter_OpticalDensity(hpf: 0.015, lpf:0.085), hmrR _OD2Conc(ppf: 1.0, 1.0) and hmrR_MotionCorrectCbsi (turnon: 1). The preprocess is shown in Fig 1.

![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps3.png)Fig 1 The preprocessing process of the raw intensity data of blood oxygen monitoring device by Homer3

## ***\*2 Data content\****

The data of one participant in one highly automated driving scenario is stored in a csv file. The data of same participant in same highly automated driving scenario is stored in a subfolder. There are 8 channels. The csv file which contains the raw data ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps4.jpg)and ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps5.jpg) and the csv file which contains the preprocessing data of ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps6.jpg)and ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps7.jpg) by Homer3 were stored in the folder of “RawfNIRSDataset”, “PreprocessingfNIRSDataset” respectively. The details of their csv files are shown Table 1.

| Raw data CSV | Preprocessing data CSV                                       |                                                              |               |      |                                                              |                                                              |               |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------- |
| Raw          | Content                                                      | Unit                                                         | Sampling rate | Row  | Content                                                      | Unit                                                         | Sampling rate |
| 1            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps8.jpg) of channel 1 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps9.jpg) mol/L | 100Hz         | 1    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps10.jpg) of channel 1 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps11.jpg)M mol/L | 100Hz         |
| 2            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps12.jpg) of channel 1 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps13.jpg) mol/L | 100Hz         | 2    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps14.jpg) of channel 1 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps15.jpg)M mol/L | 100Hz         |
| 3            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps16.jpg) of channel 2 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps17.jpg) mol/L | 100Hz         | 3    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps18.jpg) of channel 2 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps19.jpg)M mol/L | 100Hz         |
| 4            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps20.jpg) of channel 2 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps21.jpg) mol/L | 100Hz         | 4    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps22.jpg) of channel 2 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps23.jpg)M mol/L | 100Hz         |
| 5            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps24.jpg) of channel 3 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps25.jpg) mol/L | 100Hz         | 5    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps26.jpg) of channel 3 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps27.jpg)M mol/L | 100Hz         |
| 6            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps28.jpg) of channel 3 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps29.jpg) mol/L | 100Hz         | 6    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps30.jpg) of channel 3 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps31.jpg)M mol/L | 100Hz         |
| 7            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps32.jpg) of channel 4 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps33.jpg) mol/L | 100Hz         | 7    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps34.jpg) of channel 4 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps35.jpg)M mol/L | 100Hz         |
| 8            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps36.jpg) of channel 4 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps37.jpg) mol/L | 100Hz         | 8    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps38.jpg) of channel 4 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps39.jpg)M mol/L | 100Hz         |
| 9            | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps40.jpg) of channel 5 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps41.jpg) mol/L | 100Hz         | 9    | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps42.jpg) of channel 5 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps43.jpg)M mol/L | 100Hz         |
| 10           | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps44.jpg) of channel 5 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps45.jpg) mol/L | 100Hz         | 10   | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps46.jpg) of channel 5 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps47.jpg)M mol/L | 100Hz         |
| 11           | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps48.jpg) of channel 6 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps49.jpg) mol/L | 100Hz         | 11   | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps50.jpg) of channel 6 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps51.jpg)M mol/L | 100Hz         |
| 12           | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps52.jpg) of channel 6 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps53.jpg) mol/L | 100Hz         | 12   | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps54.jpg) of channel 6 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps55.jpg)M mol/L | 100Hz         |
| 13           | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps56.jpg) of channel 7 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps57.jpg) mol/L | 100Hz         | 13   | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps58.jpg) of channel 7 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps59.jpg)M mol/L | 100Hz         |
| 14           | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps60.jpg) of channel 7 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps61.jpg) mol/L | 100Hz         | 14   | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps62.jpg) of channel 7 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps63.jpg)M mol/L | 100Hz         |
| 15           | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps64.jpg) of channel 8 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps65.jpg) mol/L | 100Hz         | 15   | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps66.jpg) of channel 8 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps67.jpg)M mol/L | 100Hz         |
| 16           | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps68.jpg) of channel 8 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps69.jpg) mol/L | 100Hz         | 16   | The ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps70.jpg) of channel 8 | ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps71.jpg)M mol/L | 100Hz         |

Table 1 Organization of the content in blood oxygen monitoring device CSV

The information corresponding to the position, velocity and acceleration of ego vehicle and target vehicle (or pedestrian) was contained in a CSV file, and those CSV files were stored in the folder of "VehicleStatusDatase". The CSV file also contains a kinetic energy field and a flag bit, The flag bit indicates the presence of absence of a stimulating sound during the sample time period. If its value is true, then the period contains a stimulating sound. The details of this csv files are shown in Table 2. In this experiment, data is divided into low-risk and high-risk episodes according to one spite point, the data in csv files at front half and later half parts are considered as low-risk data and high-risk data.

| Row  | Content                                                      | Unit   | Sampling rate |
| ---- | ------------------------------------------------------------ | ------ | ------------- |
| 1    | The lateral position of ego vehicle                          | m      | 100Hz         |
| 2    | The longitudinal position of ego vehicle                     | m      | 100Hz         |
| 34   | The lateral velocity of ego vehicleThe longitudinal velocity of ego vehicle | m/sm/s | 100Hz100Hz    |
| 5    | The lateral acceleration of ego vehicle                      | m/s2   | 100Hz         |
| 6    | The longitudinal acceleration of ego vehicle                 | m/s2   | 100Hz         |
| 7    | The lateral position of target vehicle (or pedestrian)       | m      | 100Hz         |
| 8    | The longitudinal position of target vehicle (or pedestrian)  | m      | 100Hz         |
| 910  | The lateral velocity of target vehicle(or pedestrain)The longitudinal velocity of target vehicle (or pedestrain) | m/sm/s | 100Hz100Hz    |
| 11   | The lateral acceleration of target vehicle(or pedestrain)    | m/s2   | 100Hz         |
| 12   | The longitudinal acceleration of target vehicle (or pedestrain) | m/s2   | 100Hz         |
| 13   | The kinetic energy field28                                   | kg/s   | 100Hz         |
| 14   | a flag bit                                                   | *      | 100Hz         |

Table 2 Organization of the content in highly automated driving scenario CSV. The * indicates that there is no a unit for the corresponding content.

## ***\*3 Data analysis\****

There are four indexes which can be used to explore mental activities based on fNIRS: ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps72.jpg), ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps73.jpg), cerebral blood volume exchange ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps74.jpg)and cerebral oxygen exchange ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps75.jpg). ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps76.jpg) has be used in many studies. Scenarios 04, 05, 07 and 10 belong to four relatively dangerous scenarios for these three typical single-car scenarios. The difference of passengers’ mental activities between low-risk and high-risk segments were compared based on ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps77.jpg). Training and testing data were extracted from those low-risk ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps78.jpg) and high-risk ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps79.jpg) according to a four-second window and a one-second step, and those training and testing data was classified using common there machine learning methods which contains two integration algorithm, Adaboost and composite classifier. The classification results are shown inTable 3. Compared with other algorithms, the testing accuracies of AdaBoost algorithm for scenarios 4, 5, 7 and 10 are highest. Besides, the data of ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps80.jpg) in low-risk and high-risk segments can be distinguished partly by those three machine learning methods.

| Scenario   | Accuracy          | Ada Boost31 | Composite Classifier | RandomForest |
| ---------- | ----------------- | ----------- | -------------------- | ------------ |
| Scenario4  | Training accuracy | 100%        | 94.16%               | 100%         |
|            | Testing accuracy  | **88.17%**  | 71.32%               | 82.83%       |
| Scenario5  | Training accuracy | 100%        | 95.36%               | 100%         |
|            | Testing accuracy  | **86.32%**  | 71.95%               | 81.18%       |
| Scenario7  | Training accuracy | 100%        | 96.42%               | 100%         |
|            | Testing accuracy  | **90.08%**  | 77.58%               | 87.15%       |
| Scenario10 | Training accuracy | 100%        | 94.25%               | 100%         |
|            | Testing accuracy  | **78.46%**  | 61.18%               | 73.17%       |

Table 3 The classification results of low-risk ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps81.jpg) and high-risk ![img](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml7900\wps82.jpg) for relatively dangerous scenarios. Composite Classifier is also a integration algorithm, in this paper, it is consists of support vector machine, decision tree, logistic regression and RandomForest, and its result is decided by voting method.

 

 
